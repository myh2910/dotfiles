\ProvidesPackage{von}[2016/08/06 v1.0 VON problem manager]
% #1 is always index
% #2 is always source
\usepackage{xstring}
% Generate a unique name using the first 12 characters of an MD5 sum
\def\@vonsetname#1#2{\StrLeft{\pdfmdfivesum{#1#2}}{12}[\@vonname]}
% We need to store results since StrLeft isn't purely expandable
\newcommand{\@vonname}{}
\newwrite\@vonfile
\newcommand{\@voncore}[2]{
	\@vonsetname{#1}{#2}
	\immediate\openout\@vonfile=\@vonname.von
	\immediate\write\@vonfile{von show "#2" -b #1 > \@vonname.out}
	\immediate\closeout\@vonfile
	\IfFileExists{\@vonname.out}{\input{\@vonname.out}}%
	{\PackageWarning{von}{file `\@vonname.out' not found}}}
\newcommand{\voninclude}[2][0]{\@voncore{#1}{#2}}

\def\von{\@ifstar\@vonstar\@von}
\newcommand{\@von}[2][problem]{\begin{#1}[#2] \voninclude{#2} \end{#1}}
\newcommand{\@vonstar}[2][problem]{\begin{#1} \voninclude{#2} \end{#1}}
